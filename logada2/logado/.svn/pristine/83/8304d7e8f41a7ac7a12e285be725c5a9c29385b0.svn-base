<?php

$title = 'EDITAR ATIVIDADE';
$this->headTitle($title);
?>
<script type="text/javascript" src="/public/js/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        var cod = <?php echo $atividade->getIdDestino();?>;
        buscaDestino2(cod);
    })
    function buscaDestino(){
        $.ajax({
            type: "POST",
            data: {'tipo_destino': $('#tipo_destino').val()},
            url: '/admin/atividades/buscaDestino',
            success: function(dados) {
                $('#destino').html(dados);
            }
        });
    }
    function buscaDestino2(cod){
        $.ajax({
            type: "POST",
            data: {'tipo_destino': $('#tipo_destino').val(),'cod':cod},
            url: '/admin/atividades/buscaDestino',
            success: function(dados) {
                $('#destino').html(dados);
            }
        });
    }
</script>
<link id="file_estilo" rel="stylesheet" type="text/css" href="/public/css/estilo_interno.css" media="all" />
<h2><?php echo $this->escapeHtml($title); ?></h2>
<br class="limpa">
<form method="post">
    <div class="control-group">
        <label class="label-admin" for="nome">Nome do evento</label>
        <div class="controls">
            <input type="text" class="input-admin" id="nome" name="nome" class="input-medium" value="<?php echo $atividade->getNome(); ?>">
        </div>
    </div>

    <div class="control-group">
        <label class="label-admin" for="local">Local do evento</label>
        <div class="controls">
            <input type="text" class="input-admin" id="local" name="local" class="input-medium" value="<?php echo $atividade->getLocal(); ?>">
        </div>
    </div>

    <div class="control-group">
        <label class="label-admin" for="tipo_destino">Para quem é o evento?</label>
        <div class="controls">
            <select class="input-admin" name="tipo_destino" id="tipo_destino" onchange="buscaDestino()">
                <option value=""></option>
                <option value="A"<?php echo $atividade->getTipoDestino()=='A'?' selected':''; ?>>Aluno</option>
                <option value="T"<?php echo $atividade->getTipoDestino()=='T'?' selected':''; ?>>Turma</option>
            </select>
        </div>
    </div>

    <div class="control-group" id="destino">
    </div>

    <div class="control-group">
        <label class="label-admin" for="data">Data</label>
        <div class="controls">
            <?php
            $d = explode('-',$atividade->getData());
            $data = $d[2].'/'.$d[1].'/'.$d[0];
            ?>
            <input type="text" class="input-admin" id="data" name="data" value="<?php echo $data; ?>">
        </div>
    </div>

    <div class="control-group">
        <label class="label-admin" for="hora_inicio">Hora início</label>
        <div class="controls">
            <input type="text" class="input-admin" id="hora_inicio" name="hora_inicio" value="<?php echo $atividade->getHoraInicio(); ?>">
        </div>
    </div>

    <div class="control-group">
        <label class="label-admin" for="hora_fim">Hora término</label>
        <div class="controls">
            <input type="text" class="input-admin" id="hora_fim" name="hora_fim" value="<?php echo $atividade->getHoraFim(); ?>">
        </div>
    </div>

    <div class="control-group">
        <label class="label-admin" for="regiao">Descrição</label>
        <div class="controls">
            <textarea id="descricao" name="descricao" cols="50" rows="5"><?php echo $atividade->getDescricao(); ?></textarea>
        </div>
    </div>

    <div class="control-group">
        <div class="controls">
            <br>
            <button type="submit" class="btn btn-admin">Enviar</button>
            <button type="button" onclick="document.location='/admin/atividades'" class="btn btn-admin-cancel">Voltar</button>
        </div>
    </div>
</form>